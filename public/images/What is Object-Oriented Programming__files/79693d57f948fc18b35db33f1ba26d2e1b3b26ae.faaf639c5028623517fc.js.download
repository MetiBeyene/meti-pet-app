(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{"5R4e":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var o=n("mymk"),i=n("X9L9");function a(t){if(null==t)return null;if(t.responseJSON&&null!=t.responseJSON.errorText)return t.responseJSON.errorText;if(null!=t.responseJSON&&null!=t.responseJSON.errors){var e="";for(var n in t.responseJSON.errors)e+="<p>".concat(o.a.capitalizeFirstLetter(n),": ").concat(t.responseJSON.errors[n].toLowerCase(),"</p>");return e}return null}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(t){var a="".concat(window.location.protocol,"//").concat(window.location.hostname),r=window.location.port?"".concat(a,":").concat(window.location.port):a;if(401!==t.status||o&&-1!==o.indexOf(t.status))if(404!==t.status||o&&-1!==o.indexOf(t.status)){if(!(409!==t.status||o&&-1!==o.indexOf(t.status)))return!0;if(400===t.status&&(!o||-1===o.indexOf(t.status)))return!0}else e(i.b.set(!0));else{var c;if(null===n||void 0===n||null===(c=n.query)||void 0===c?void 0:c.ru)return!1;var s=null;if(n){s=n.pathname;var l="/explore"===n.pathname||"/mycourses"===n.pathname?"/":"/login";return window.location.replace("".concat(r,"/").concat(l,"?ru=").concat(s)),!1}window.location.replace("".concat(r,"/login"))}}return!1}var c=function(t){var e,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===t||void 0===t||null===(e=t.responseJSON)||void 0===e?void 0:e.errorText)||(null===t||void 0===t||null===(n=t.responseJSON)||void 0===n||null===(o=n.errors)||void 0===o?void 0:o[i])}},"6tHX":function(t,e,n){var o,i,a;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,i=[e],void 0===(a="function"===typeof(o=function(t){"use strict";function e(t){return i(t)||o(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.__esModule=!0,t.onlyChars=t.withoutChars=t.keepUnique=t.default=void 0;var a=function(){function t(t,n,o,i){if(void 0===t&&(t=""),void 0===n&&(n=0),void 0===o&&(o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),void 0===i&&(i="cfhistuCFHISTU"),this.minLength=n,"number"!==typeof n)throw new TypeError("Hashids: Provided 'minLength' has to be a number (is "+typeof n+")");if("string"!==typeof t)throw new TypeError("Hashids: Provided 'salt' has to be a string (is "+typeof t+")");if("string"!==typeof o)throw new TypeError("Hashids: Provided alphabet has to be a string (is "+typeof o+")");var a=Array.from(t),p=Array.from(o),v=Array.from(i);this.salt=a;var g=l(p);if(g.length<r)throw new Error("Hashids: alphabet must contain at least "+r+" unique characters, provided: "+g);this.alphabet=u(g,v);var h,y,b,O=d(v,g);this.seps=f(O,a),(0===this.seps.length||this.alphabet.length/this.seps.length>c)&&(h=Math.ceil(this.alphabet.length/c))>this.seps.length&&(y=h-this.seps.length,(b=this.seps).push.apply(b,e(this.alphabet.slice(0,y))),this.alphabet=this.alphabet.slice(y)),this.alphabet=f(this.alphabet,a);var j=Math.ceil(this.alphabet.length/s);this.alphabet.length<3?(this.guards=this.seps.slice(0,j),this.seps=this.seps.slice(j)):(this.guards=this.alphabet.slice(0,j),this.alphabet=this.alphabet.slice(j)),this.guardsRegExp=_(this.guards),this.sepsRegExp=_(this.seps),this.allowedCharsRegExp=m([].concat(e(this.alphabet),e(this.guards),e(this.seps)))}var n=t.prototype;return n.encode=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a="";return(o=Array.isArray(t)?t:[].concat(e(null!=t?[t]:[]),e(o))).length?(o.every(p)||(o=o.map((function(t){return"bigint"===typeof t||"number"===typeof t?t:b(String(t))}))),o.every(v)?this._encode(o).join(""):a):a},n.decode=function(t){return t&&"string"===typeof t&&0!==t.length?this._decode(t):[]},n.encodeHex=function(t){switch(typeof t){case"bigint":t=t.toString(16);break;case"string":if(!/^[0-9a-fA-F]+$/.test(t))return"";break;default:throw new Error("Hashids: The provided value is neither a string, nor a BigInt (got: "+typeof t+")")}var e=O(t,12,(function(t){return parseInt("1"+t,16)}));return this.encode(e)},n.decodeHex=function(t){return this.decode(t).map((function(t){return t.toString(16).slice(1)})).join("")},n._encode=function(t){var n=this,o=this.alphabet,i=t.reduce((function(t,e,n){return t+("bigint"===typeof e?Number(e%BigInt(n+100)):e%(n+100))}),0),a=[o[i%o.length]],r=a.slice(),c=this.seps,s=this.guards;if(t.forEach((function(i,s){var l,u=r.concat(n.salt,o);o=f(o,u);var d=g(i,o);if((l=a).push.apply(l,e(d)),s+1<t.length){var p=d[0].codePointAt(0)+s,v="bigint"===typeof i?Number(i%BigInt(p)):i%p;a.push(c[v%c.length])}})),a.length<this.minLength){var l=(i+a[0].codePointAt(0))%s.length;if(a.unshift(s[l]),a.length<this.minLength){var u=(i+a[2].codePointAt(0))%s.length;a.push(s[u])}}for(var d=Math.floor(o.length/2);a.length<this.minLength;){var p,v;o=f(o,o),(p=a).unshift.apply(p,e(o.slice(d))),(v=a).push.apply(v,e(o.slice(0,d)));var h=a.length-this.minLength;if(h>0){var y=h/2;a=a.slice(y,y+this.minLength)}}return a},n.isValidId=function(t){return this.allowedCharsRegExp.test(t)},n._decode=function(t){if(!this.isValidId(t))throw new Error("The provided ID ("+t+") is invalid, as it contains characters that do not exist in the alphabet ("+this.guards.join("")+this.seps.join("")+this.alphabet.join("")+")");var n=t.split(this.guardsRegExp),o=n[3===n.length||2===n.length?1:0];if(0===o.length)return[];var i=o[Symbol.iterator]().next().value,a=o.slice(i.length).split(this.sepsRegExp),r=this.alphabet,c=[],s=a,l=Array.isArray(s),u=0;for(s=l?s:s[Symbol.iterator]();;){var d;if(l){if(u>=s.length)break;d=s[u++]}else{if((u=s.next()).done)break;d=u.value}var p=d,v=f(r,[i].concat(e(this.salt),e(r)).slice(0,r.length));c.push(h(Array.from(p),v)),r=v}return this._encode(c).join("")!==t?[]:c},t}();t.default=a;var r=16,c=3.5,s=12,l=function(t){return Array.from(new Set(t))};t.keepUnique=l;var u=function(t,e){return t.filter((function(t){return!e.includes(t)}))};t.withoutChars=u;var d=function(t,e){return t.filter((function(t){return e.includes(t)}))};t.onlyChars=d;var p=function(t){return"bigint"===typeof t||!Number.isNaN(Number(t))&&Math.floor(Number(t))===t},v=function(t){return"bigint"===typeof t||t>=0&&Number.isSafeInteger(t)};function f(t,e){if(0===e.length)return t;for(var n,o=t.slice(),i=o.length-1,a=0,r=0;i>0;i--,a++){r+=n=e[a%=e.length].codePointAt(0);var c=(n+a+r)%i,s=o[i],l=o[c];o[c]=s,o[i]=l}return o}var g=function(t,e){var n=[];if("bigint"===typeof t){var o=BigInt(e.length);do{n.unshift(e[Number(t%o)]),t/=o}while(t>BigInt(0))}else do{n.unshift(e[t%e.length]),t=Math.floor(t/e.length)}while(t>0);return n},h=function(t,e){return t.reduce((function(n,o){var i=e.indexOf(o);if(-1===i)throw new Error("The provided ID ("+t.join("")+") is invalid, as it contains characters that do not exist in the alphabet ("+e.join("")+")");if("bigint"===typeof n)return n*BigInt(e.length)+BigInt(i);var a=n*e.length+i;if(Number.isSafeInteger(a))return a;if("function"===typeof BigInt)return BigInt(n)*BigInt(e.length)+BigInt(i);throw new Error("Unable to decode the provided string, due to lack of support for BigInt numbers in the current environment")}),0)},y=/^\+?[0-9]+$/,b=function(t){return y.test(t)?parseInt(t,10):NaN},O=function(t,e,n){return Array.from({length:Math.ceil(t.length/e)},(function(o,i){return n(t.slice(i*e,(i+1)*e))}))},_=function(t){return new RegExp(t.map((function(t){return j(t)})).sort((function(t,e){return e.length-t.length})).join("|"))},m=function(t){return new RegExp("^["+t.map((function(t){return j(t)})).sort((function(t,e){return e.length-t.length})).join("")+"]+$")},j=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}})?o.apply(e,i):o)||(t.exports=a)},"9dyO":function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var o=n("rePB"),i=n("Ff2n"),a=n("i7Pf"),r=n("uNJL"),c=n("Cjvp"),s=n("jxKE"),l=n("Vgjn"),u=n("fh7V"),d=n("rfrl"),p=n("I1F8");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=[s.d.ASSESSMENT,s.d.PROJECT],h=Object(a.b)({name:"author/collection",initialState:{},reducers:{reset:function(){return{}},set:function(t,e){var n=e.payload;return Object(d.a)(n,(function(e){var n,o,i,a,r,c;e.instance.details.toc||(e.instance.details.toc={categories:[]}),e.instance.details.udata_files||(e.instance.details.udata_files=[]),e.instance.details.skills||(e.instance.details.skills=[]),e.instance.details.CodeThemes=e.instance.details.default_themes?e.instance.details.default_themes.code_themes:{Code:"default",Markdown:"default",RunJS:"default",SPA:"default"},e.instance.details.CodeThemes.isForced=null!==(n=e.instance.details.CodeThemes.isForced)&&void 0!==n?n:u.a,e.instance.details.docker.container.track=null!==(o=null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(a=i.details)||void 0===a||null===(r=a.docker)||void 0===r||null===(c=r.container)||void 0===c?void 0:c.track)&&void 0!==o&&o,e.instance.details.toc.categories.length||j(e);var l=e.instance.details.page_titles;e.instance.details.toc.categories.forEach((function(t){return t.pages.forEach((function(t){var e;[s.L.LESSON,s.L.SHOT].includes(t.type)||(t.title=null!==(e=null===l||void 0===l?void 0:l[null===t||void 0===t?void 0:t.id])&&void 0!==e?e:s.a)}))}))}))},certificateBought:function(t){t.has_purchased_certificate=!0},updateDetails:function(t,e){var n=e.payload,o=(n.docker,n.deleted_page_details,Object(i.a)(n,["docker","deleted_page_details"]));t.instance.details.toc.categories.forEach((function(t){return t.pages.forEach((function(t){return t.is_recovered=!1}))})),t.instance.details=f(f({},t.instance.details),o)},addCategory:function(t,e){var n,o,i,a,r,c=e.payload,l=c.index,u=c.parentIndex,d=c.type,v=void 0===d?s.d.COLLECTION_CATEGORY:d,h=c.id,b=void 0===h?void 0:h,O=c.data,j=void 0===O?{}:O,S=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.work_type)===s.j.PATH,w=null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(a=i.details)||void 0===a||null===(r=a.toc)||void 0===r?void 0:r.categories,x=_(w);if(x){var E=t.instance.details.toc.categories[0].author_id,T=t.instance.details.toc.categories[0].collection_id,I=t.instance.details.toc.categories[0].id;t.instance.details.toc.categories[0].title=void 0===j.title?"Untitled category":j.title,t.instance.details.toc.categories[0].author_id=j.author_id||E,t.instance.details.toc.categories[0].collection_id=j.collection_id||T,t.instance.details.toc.categories[0].id=j.id||I,t.instance.details.toc.categories[0].editMode=!(g.includes(v)||S),j.type&&(t.instance.details.toc.categories[0].type=j.type)}!g.includes(v)&&x||(y(t,!1,!(g.includes(v)||S),!1,l,u,v,b,f(f({},j),{},{title:S?j.title||"Untitled category":j.title})),function(t){var e,n,o,i=null===t||void 0===t||null===(e=t.instance)||void 0===e||null===(n=e.details)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,a=m(i,p.a);if(-1!==a){var r=t.instance.details.toc.categories[a];t.instance.details.toc.categories.push(r),t.instance.details.toc.categories.splice(a,1)}}(t))},updateCategoryTitle:function(t,e){var n,o,i,a=e.payload,r=a.title,c=a.id,s=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,c);t.instance.details.toc.categories[s].title="__default"!==r?r:"",t.instance.details.toc.categories[s].editMode=!1},updateArticleTags:function(t,e){var n,o,i=e.payload,a=i.pageId,r=i.tags;[s.j.MODULE,s.j.PATH].includes(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.work_type)||(t.instance.details.page_tags[a]=r)},updateArticleTitle:function(t,e){var n=e.payload,o=n.categoryId,i=n.pageId,a=n.title;if(t.instance){if(o){var r,c,s,l,u,d,p,v,f=m(null===t||void 0===t||null===(r=t.instance)||void 0===r||null===(c=r.details)||void 0===c||null===(s=c.toc)||void 0===s?void 0:s.categories,o),g=m(null===t||void 0===t||null===(l=t.instance)||void 0===l||null===(u=l.details)||void 0===u||null===(d=u.toc)||void 0===d||null===(p=d.categories)||void 0===p||null===(v=p[f])||void 0===v?void 0:v.pages,i);t.instance.details.toc.categories[f].pages[g].title=a,t.instance.details.toc.categories[f].pages[g].editMode=!1}t.instance.details.page_titles[i]=a}},removeCategory:function(t,e){var n,o,i,a,r,c,s,l=e.payload.id,u=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,l);t.instance.details.toc.categories.splice(u,1),(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s?void 0:s.length)||j(t)},updateCodeExecResourceFile:function(t,e){var n=e.payload;t.instance.details.code_exec_resource_metadata=n},updateDockerForExternalLesson:function(t,e){var n,o=e.payload;(null===(n=t.instance)||void 0===n?void 0:n.details)&&(t.instance.details.docker=o.docker)},addUserDataResourceFile:function(t,e){var n=e.payload;t.instance.details.udata_files.push(n)},updateUserDataResourceFile:function(t,e){var n=e.payload,o=n.payload,i=n.index;t.instance.details.udata_files[i]=f(f({},t.instance.details.udata_files[i]),o)},removeUserDataResourceFile:function(t,e){var n=e.payload.index;t.instance.details.udata_files.splice(n,1)},removeCoverImage:function(t){t.instance.details.cover_image_id=null},saveAPIKey:function(t,e){var n,o,i,r=e.payload.apiKey,c=r.id,s=void 0===c?"":c,l=r.key,u=void 0===l?"":l,d=r.value,p=void 0===d?"":d,v=r.useAsDefault,f=void 0===v||v,g=r.urlText,h=void 0===g?"":g,y=u,b=null!==(n=null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(i=o.details)||void 0===i?void 0:i.api_keys)&&void 0!==n?n:[],O={id:s||Object(a.d)(),key:u,name:y,value:p,urlText:h,useAsDefault:f},_=b.findIndex((function(t){return t.id===s}));-1!==_?t.instance.details.api_keys[_]=O:t.instance.details.api_keys.push(O)},removeAPIKey:function(t,e){var n,o,i=e.payload,a=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.api_keys).findIndex((function(t){return t.id===i.id}));if(-1===a)return t;t.instance.details.api_keys.splice(a,1)},updateTestimonialImage:function(t,e){var n=e.payload,o=n.payload,i=n.index;t.instance.details.testimonials[i].pic=o},addTestimonial:function(t,e){var n=e.payload.testimonial;t.instance.details.testimonials||(t.instance.details.testimonials=[]),t.instance.details.testimonials.push(n)},removeTestimonial:function(t,e){var n=e.payload.index;t.instance.details.testimonials.splice(n,1)},updateTestimonial:function(t,e){var n=e.payload,o=n.index,i=n.testimonial;t.instance.details.testimonials[o]=i},changeTestimonialOrder:function(t,e){var n=e.payload.testimonials;t.instance.details.testimonials=n},addArticle:function(t,e){var n,o,i,a,r,c=e.payload,l=c.category_id,u=c.article,d=c.index,p=c.data,v=void 0===p?{}:p,f=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.work_type)===s.j.PATH,g=m(null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(a=i.details)||void 0===a||null===(r=a.toc)||void 0===r?void 0:r.categories,l);b(t,u,g,d,v,f)},updateETAG:function(t,e){var n=e.payload;t[l.a]=n},cloneArticle:function(t,e){var n,o,i,a=e.payload,r=a.category_id,c=a.article,s=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,r);O(t,c,s)},removeArticle:function(t,e){var n,o,i,a,r,c,s,l,u=e.payload,d=u.category_id,p=u.article_id,v=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,d),f=m(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(l=s[v])||void 0===l?void 0:l.pages,p);t.instance.details.toc.categories[v].pages.splice(f,1),t.instance.details.deleted_page_details={}},recoverArticle:function(t,e){var n,o,i,a,r,c,s,l,u,d,v,f,g=e.payload.article_id,h=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,p.a);-1===h&&function(t){y(t,!1,!1,!0)}(t),h=m(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c?void 0:c.categories,p.a),b(t,{page_id:g},h,null);var O=null===t||void 0===t||null===(s=t.instance)||void 0===s||null===(l=s.details)||void 0===l||null===(u=l.deleted_page_details)||void 0===u?void 0:u[g.toString()],_=O?O.title:"Untitled Masterpiece";null===t||void 0===t||(null===(d=t.instance)||void 0===d||(null===(v=d.details)||void 0===v||(null===(f=v.deleted_page_details)||void 0===f||delete f[g.toString()]))),t.instance.details.page_titles[g]=_},updateDeletedArticles:function(t,e){var n=e.payload;t.instance.details.deleted_page_details=f(f({},t.instance.details.deleted_page_details),n)},toggleArticleVisibility:function(t,e){var n,o,i,a,r,c,s,l,u=e.payload,d=u.category_id,p=u.article_id,v=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,d),f=m(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(l=s[v])||void 0===l?void 0:l.pages,p),g=t.instance.details.toc.categories[v].pages[f];g.is_preview=!g.is_preview},toggleIsLesson:function(t,e){var n,o,i,a,r,c,s,l,u=e.payload,d=u.category_id,p=u.article_id,v=m(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i?void 0:i.categories,d),f=m(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(l=s[v])||void 0===l?void 0:l.pages,p),g=t.instance.details.toc.categories[v].pages[f];g.is_lesson=!(void 0===g.is_lesson||!0===g.is_lesson)},discardChanges:function(t,e){return e.payload.originalCollection},publish:function(t){t.instance.type="published"},moveCategory:function(t,e){var n,o,i,a,r,c,s,l,u=e.payload,d=u.from,v=u.to,f=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i||null===(a=i.categories)||void 0===a?void 0:a[d.itemIndex];return f.id===p.a||(null===t||void 0===t||null===(r=t.instance)||void 0===r||null===(c=r.details)||void 0===c||null===(s=c.toc)||void 0===s||null===(l=s.categories)||void 0===l?void 0:l[v.itemIndex]).id===p.a?t:(t.instance.details.toc.categories.splice(d.itemIndex,1),void t.instance.details.toc.categories.splice(v.itemIndex,0,f))},setExternalOffer:function(t,e){var n=e.payload.externalOffer;return t.external_offer=n,t},hideExternalOffer:function(t){t.external_offer.hidden=!0},setExternalOfferViewed:function(t){t.external_offer.viewed=!0},moveArticleWithinOrigin:function(t,e){var n,o,i,a,r,c=e.payload,s=c.from,l=c.to,u=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i||null===(a=i.categories)||void 0===a||null===(r=a[s.parentIndex])||void 0===r?void 0:r.pages;u.splice(l.itemIndex,0,u.splice(s.itemIndex,1)[0])},moveArticleToNotEmptyCategory:function(t,e){var n,o,i,a,r,c,s,l,u,d,v,f,g,h=e.payload,y=h.from,b=h.to;if((null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o||null===(i=o.toc)||void 0===i||null===(a=i.categories)||void 0===a||null===(r=a[b.parentIndex])||void 0===r?void 0:r.id)===p.a)return t;(null===t||void 0===t||null===(c=t.instance)||void 0===c||null===(s=c.details)||void 0===s||null===(l=s.toc)||void 0===l||null===(u=l.categories)||void 0===u||null===(d=u[y.parentIndex])||void 0===d?void 0:d.id)===p.a&&(t.instance.details.toc.categories[y.parentIndex].pages[y.itemIndex].is_recovered=!0);var O=null===t||void 0===t||null===(v=t.instance)||void 0===v||null===(f=v.details)||void 0===f||null===(g=f.toc)||void 0===g?void 0:g.categories;O[b.parentIndex].pages.splice(b.itemIndex,0,O[y.parentIndex].pages.splice(y.itemIndex,1)[0])},setDirty:function(t,e){var n=e.payload;t.instance.dirty=n},setNotification:function(t,e){var n=e.payload;t.notification_status=n}}}),y=function(t,e,n,o,i,a){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.d.COLLECTION_CATEGORY,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},d=t.instance.details.toc.categories;if(d.forEach((function(t){return t.editMode=!1})),void 0!==a){var p=d[a].pages,v=p.splice(i+1),f=p=p.slice(0,i+1),h=new r.a(e,n);if((h=JSON.parse(JSON.stringify(h))).pages=v,d[a].pages=f,d.splice(a+1,0,h),g.includes(c)){var y=new r.a(!1,n,o,c,l);y=JSON.parse(JSON.stringify(y)),d.push(y)}}else{var b=new r.a(e,n,o,u.type||c,u.id||l,u.author_id,u.collection_id,u.title);b=JSON.parse(JSON.stringify(b)),d.push(b)}},b=function(t,e,n,o){var i,a,r,l,u,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},p=arguments.length>5&&void 0!==arguments[5]&&arguments[5],v=null===e||void 0===e?void 0:e.page_id,f=null===e||void 0===e?void 0:e.author_id,g=null===e||void 0===e?void 0:e.collection_id,h=v in(S(t)||{});if(null==o){var y,b,O,_,m,j=new c.a(parseInt(v||d.id),d.type,d.title,parseInt(f||d.author_id),parseInt(g||d.collection_id),parseInt(v||d.page_id),!p&&![s.L.LESSON,s.L.SHOT].includes(null===d||void 0===d?void 0:d.type));if(h){var w,x,E=null===t||void 0===t||null===(w=t.instance)||void 0===w||null===(x=w.details)||void 0===x?void 0:x.deleted_page_details[v.toString()].title;j.title=E,j.editMode=!1}null===t||void 0===t||null===(y=t.instance)||void 0===y||null===(b=y.details)||void 0===b||null===(O=b.toc)||void 0===O||null===(_=O.categories)||void 0===_||null===(m=_[n])||void 0===m||m.pages.push(JSON.parse(JSON.stringify(j)))}else null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(a=i.details)||void 0===a||null===(r=a.toc)||void 0===r||null===(l=r.categories)||void 0===l||null===(u=l[n])||void 0===u||u.pages.splice(o+1,0,JSON.parse(JSON.stringify(new c.a(parseInt(v||d.id),d.type,d.title,parseInt(f||d.author_id),parseInt(g||d.collection_id),parseInt(v||d.page_id),!p&&![s.L.LESSON,s.L.SHOT].includes(null===d||void 0===d?void 0:d.type)))))},O=function(t,e,n){var o,i,a,r,s,l=e.page_id;e.title;return null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(i=o.details)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(s=r[n])||void 0===s?void 0:s.pages.push(JSON.parse(JSON.stringify(new c.a(l))))},_=function(t){return"__default"===(null===t||void 0===t?void 0:t[0].title)},m=function(t,e){return t.findIndex((function(t){return t.id===e}))},j=function(t){return y(t,!0,!1)};function S(t){var e,n;return null===t||void 0===t||null===(e=t.instance)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.deleted_page_details}e.b=h.reducer;var w=h.actions},"9jYD":function(t,e,n){"use strict";var o=n("jxKE");e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===o.j.PATH?"".concat(o.j.PATH).concat(e?"/lesson":""):t===o.j.MODULE?"".concat(o.j.MODULE).concat(e?"/lesson":""):"courses"}},"9wcz":function(t,e,n){t.exports=n("6tHX").default},AkIC:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var o=n("i7Pf"),i=Object(o.b)({name:"loader",initialState:{isLoaded:!1,isLoading:!1},reducers:{set:function(t,e){var n=e.payload;void 0!==n.isLoaded&&(t.isLoaded=n.isLoaded),void 0!==n.isLoading&&(t.isLoading=n.isLoading)}}});e.a=i.reducer;var a=i.actions},Cjvp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("1OyB"),i=n("rePB"),a=n("jxKE"),r=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.r.COLLECTION_LESSON,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(o.a)(this,t),Object(i.a)(this,"id",void 0),Object(i.a)(this,"title",void 0),Object(i.a)(this,"is_preview",void 0),Object(i.a)(this,"parentIndex",void 0),Object(i.a)(this,"editMode",void 0),Object(i.a)(this,"is_recovered",void 0),Object(i.a)(this,"type",void 0),Object(i.a)(this,"is_lesson",void 0),Object(i.a)(this,"author_id",void 0),Object(i.a)(this,"collection_id",void 0),Object(i.a)(this,"page_id",void 0),this.id=e,this.title=r,this.is_preview=!1,this.parentIndex=null,this.editMode=u,this.is_recovered=!1,this.type=n,this.author_id=c,this.collection_id=s,this.page_id=l}},DOFM:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o={authorCode:'import React from \'react\';\r\nimport { shallow, configure } from \'enzyme\';\r\nimport Adapter from \'enzyme-adapter-react-16\';\r\n\r\nconfigure({ adapter: new Adapter() });\r\n\r\nimport HelloWorld from \'./app\';\r\n\r\nvar TestResult = function() {\r\n    this.succeeded = false;\r\n    this.reason = "";\r\n    this.input = "";\r\n    this.expected_output = "";\r\n    this.actual_output = "";\r\n}\r\n\r\nexport const executeTests = function() {\r\n\r\n  var results = [];\r\n\r\n  result = new TestResult();\r\n  result.input = \'HelloWorld Component\';\r\n  result.expected_output = "span containing text \'Hello World\'"\r\n\r\n  let wrapper = shallow(<HelloWorld />);\r\n\r\n  // Call your Challenge function here.\r\n\r\n  let type = wrapper.type();\r\n  let testSuccessful = true;\r\n  let failureReason;\r\n\r\n  if (type !== \'span\') {\r\n    testSuccessful = false;\r\n    failureReason = "You need to render exactly one span HTML element";\r\n  } else if (wrapper.props().children != "Hello World") {\r\n     testSuccessful = false;\r\n     failureReason = "You have rendered wrong message in your span element";\r\n  }\r\n\r\n  result.actual_output = wrapper.html();\r\n\r\n  if (testSuccessful) {\r\n    result.succeeded = true;\r\n    result.reason = "Succeeded"\r\n  } else {\r\n    result.succeeded = false;\r\n    result.reason = failureReason;\r\n  }\r\n\r\n  results.push(result);\r\n\r\n  return results;\r\n}\r\n',edCode:'import { executeTests } from \'./ed_spa_test_code.js\'; var main = function() {\r\n let results = executeTests();\r\n  let test_results = []\r\n\r\n  for (let result in results) {\r\n    let jres = {}\r\n    jres["succeeded"] = results[result].succeeded\r\n    jres["reason"] = results[result].reason\r\n    jres["input"] = results[result].input\r\n    jres["expected_output"] = results[result].expected_output\r\n    jres["actual_output"] = results[result].actual_output\r\n\r\n    test_results.push(jres)\r\n  }\r\n\r\n  let output = {"test_results": test_results};\r\n  let json_output = JSON.stringify(output);\r\n\r\n  console.log("<__educative_test_results__>" + json_output + "</__educative_test_results__>");\r\n}\r\n\r\nmain();\r\n',version:"1.1"}},HdLI:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return p}));var o=n("ODXe"),i=n("rePB");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var l={keywords:{regex:/#key# [^#|^\n]+:[^#|^\n]+ #key#/g,parse:function(t){var e=t.slice(6,-6),n=e.match(/[^:|^\n]+:/g),o=e.match(/:[^\n]+/g);return{word:n&&n[0].slice(0,-1).trim(),meaning:o&&o[0].substring(1).trim()}},transform:function(t){var e=t.word,n=t.meaning;return e&&n?"<keyword><word>".concat(e,"</word><meaning>").concat(n,"</meaning></keyword>"):null}},concepts:{regex:/#concept=[^#|^\n]+#[^\n]+#concept#/g,parse:function(t){var e=t.match(/#concept=[^#|^\n]+#/g)[0],n=e.slice(9,-1).trim();return{word:t.slice(e.length).match(/[^\n]+#concept#/g)[0].slice(0,-9).trim(),name:n}},transform:function(t){var e=t.word,n=t.name;return e&&n?"<concept><word>".concat(e,"</word><name>").concat(n,"</name></concept>"):null}}},u=function(t,e){var n,o=e.regex,i=e.parse,a=e.transform,r=c(t.match(o)||[]);try{for(r.s();!(n=r.n()).done;){var s=n.value,l=a(i(s));l&&(t=t.replace(s,l))}}catch(u){r.e(u)}finally{r.f()}return t},d=function(t,e){if(!t)return"";for(var n=e.reduce((function(t,e){return r(r({},t),{},Object(i.a)({},e,!0))}),{}),a=0,c=Object.entries(l);a<c.length;a++){var s=c[a],d=Object(o.a)(s,2),p=d[0],v=d[1];n[p]||(t=u(t,v))}return t},p=function(t,e){var n=l[e];if(!n)return[];var o=n.regex,i=n.parse;return(t.match(o)||[]).map(i)}},I1F8:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o="RECOVERED_ARTICLES"},JyDq:function(t,e,n){"use strict";var o=n("1OyB"),i=n("rePB");e.a=function t(){Object(o.a)(this,t),Object(i.a)(this,"loaders",{babel:{title:"React",config:{es2015:!0,react:!0},enabled:!0},dart:{title:"Dart",config:{dart:!0},enabled:!1},"ts-react":{title:"Typescript React",config:{"ts-react":!0},enabled:!1},elm:{title:"Elm",config:{elm:!0},enabled:!1},vue:{title:"Vue.js",config:{vue:!0},enabled:!1},"gojs-react":{title:"GoJS React",config:{"gojs-react":!0},enabled:!1}})}},NHG4:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return F}));var o=n("KQm4"),i=n("o0o1"),a=n.n(i),r=n("HaE+"),c=n("rePB"),s=n("03FM"),l=n("396a"),u=n("i7Pf"),d=n("uNJL"),p=n("Cjvp"),v=n("jxKE"),f=n("Vgjn"),g=n("VMC0"),h=n("XZhq"),y=n("5R4e"),b=n("OYQK"),O=n("clVV"),_=n("QJIx"),m=n("Evd+"),j=n("OpYl"),S=n("pLgj"),w=n("fNkK"),x=n("HdLI");function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={categories:[JSON.parse(JSON.stringify(new d.a(!0,!1,!1,v.d.ASSESSMENT_CATEGORY)))]},k=function(t,e){return t.findIndex((function(t){return t.id===e}))},P=Object(s.a)(),C=P.initialState,N=P.reducers,L=Object(u.b)({name:"assessment",initialState:T(T({},C),{},{question:null}),reducers:T(T({},N),{},{updateAssessmentTitle:function(t,e){var n=e.payload;t.data.title=n,t.data.dirty=!0},updateAssessmentTimeLimit:function(t,e){var n=e.payload;t.data.time_limit=n,t.data.dirty=!0},updateAssessmentMaxAttempts:function(t,e){var n=e.payload;t.data.max_attempts=n,t.data.dirty=!0},updateAssessmentSummary:function(t,e){var n=e.payload;t.data.summary=n,t.data.dirty=!0},addUserDataResourceFile:function(t,e){var n=e.payload;t.data.udata_files.push(n),t.data.dirty=!0},updateUserDataResourceFile:function(t,e){var n=e.payload,o=n.payload,i=n.index;t.data.udata_files[i]=T(T({},t.data.udata_files[i]),o),t.data.dirty=!0},removeUserDataResourceFile:function(t,e){var n=e.payload.index;t.data.udata_files.splice(n,1),t.data.dirty=!0},addCategory:function(t,e){var n,o,i=e.payload,a=i.index,r=i.parentIndex;(function(t){return"__default"===(null===t||void 0===t?void 0:t[0].title)})(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories)?(t.data.toc.categories[0].title="Untitled category",t.data.toc.categories[0].editMode=!0):function(t,e,n,o,i){var a=t.toc.categories;if(a.forEach((function(t){return t.editMode=!1})),void 0!==i){var r=a[i].pages,c=r.splice(o+1),s=r=r.slice(0,o+1),l=new d.a(!1,e,!1,v.d.ASSESSMENT_CATEGORY);(l=JSON.parse(JSON.stringify(l))).pages=c,a[i].pages=s,a.splice(i+1,0,l)}else{var u=new d.a(!1,e,n,v.d.ASSESSMENT_CATEGORY);u=JSON.parse(JSON.stringify(u)),a.push(u)}}(t.data,!0,!1,a,r),t.data.dirty=!0},addQuestion:function(t,e){var n,o,i=e.payload,a=i.category_id,r=i.question,c=i.index;!function(t,e,n,o){var i,a,r,c,s=e.question_id;if(null==o){var l,u,d,f,g=new p.a(parseInt(s),v.r.ASSESSMENT_QUESTION);null===t||void 0===t||null===(l=t.data)||void 0===l||null===(u=l.toc)||void 0===u||null===(d=u.categories)||void 0===d||null===(f=d[n])||void 0===f||f.pages.push(JSON.parse(JSON.stringify(g)))}else null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[n])||void 0===c||c.pages.splice(o+1,0,JSON.parse(JSON.stringify(new p.a(parseInt(s),v.r.ASSESSMENT_QUESTION))))}(t,r,k(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,a),c),t.data.dirty=!0},updateCategoryTitle:function(t,e){var n,o,i=e.payload,a=i.title,r=i.id,c=k(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,r);t.data.toc.categories[c].title="__default"!==a?a:"",t.data.toc.categories[c].editMode=!1,t.data.dirty=!0},updateQuestionTitle:function(t,e){var n=e.payload,o=n.categoryId,i=n.questionId,a=n.title;if(t.data){if(o){var r=k(t.data.toc.categories,o),c=k(t.data.toc.categories[r].pages,i);t.data.toc.categories[r].pages[c].title=a,t.data.toc.categories[r].pages[c].editMode=!1}t.data.dirty=!0}},moveCategory:function(t,e){var n,o,i,a=e.payload,r=a.from,c=a.to,s=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o||null===(i=o.categories)||void 0===i?void 0:i[r.itemIndex];t.data.toc.categories.splice(r.itemIndex,1),t.data.toc.categories.splice(c.itemIndex,0,s),t.data.dirty=!0},moveQuestionWithinOrigin:function(t,e){var n,o,i,a,r=e.payload,c=r.from,s=r.to,l=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o||null===(i=o.categories)||void 0===i||null===(a=i[c.parentIndex])||void 0===a?void 0:a.pages;l.splice(s.itemIndex,0,l.splice(c.itemIndex,1)[0]),t.data.dirty=!0},moveQuestionToNotEmptyCategory:function(t,e){var n,o=e.payload,i=o.from,a=o.to,r=null===t||void 0===t||null===(n=t.data.toc)||void 0===n?void 0:n.categories;r[a.parentIndex].pages.splice(a.itemIndex,0,r[i.parentIndex].pages.splice(i.itemIndex,1)[0]),t.data.dirty=!0},removeQuestion:function(t,e){var n,o,i,a,r,c,s=e.payload,l=s.category_id,u=s.article_id,d=k(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,l),p=k(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[d])||void 0===c?void 0:c.pages,u);t.data.toc.categories[d].pages.splice(p,1),t.data.dirty=!0},removeCategory:function(t,e){var n,o,i,a,r,c=e.payload.id,s=k(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,c);t.data.toc.categories.splice(s,1),(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r?void 0:r.length)||(t.data.toc=I),t.data.dirty=!0},setQuestion:function(t,e){var n=e.payload;t.question=function(t,e){var n;return T(T({},t),{},{content:T(T({},t.content),{},{questionStatement:(null===(n=t.content)||void 0===n?void 0:n.questionStatement)||_.a}),skills:((null===t||void 0===t?void 0:t.skills)||[]).filter((function(t){return e.indexOf(t)>=0}))})}(n.data,t.data.skills),t.question[f.a]=n[f.a]},setRestoredQuestion:function(t,e){var n=e.payload;t.question&&(t.question.content=n.data.content,t.question.protected_content=n.data.protected_content,t.question.question_type=n.data.question_type,t.question.difficulty=n.data.difficulty,t.question.relevant_lessons=n.data.relevant_lessons,t.question.skills=n.data.skills,t.question.snapshot_loaded=!0)},clearRestoredQuestion:function(t){t.question&&(t.question.content=null,t.question.protected_content=null,t.question.question_type=null,t.question.difficulty=null,t.question.snapshot_loaded=!1)},updateQuestionData:function(t,e){var n=e.payload;t.question.content=n.content,t.question.protected_content=n.protected_content,t.question.question_type=n.question_type,t.question.difficulty=n.difficulty,t.question.skills=n.skills,t.question.relevant_lessons=n.relevant_lessons,t.question.dirty=!0},updateQuestionETag:function(t,e){var n,o=e.payload;t.question=null!==(n=t.question)&&void 0!==n?n:null,t.question[f.a]=o[f.a],o.saved&&(t.question.dirty=!1,t.question.modified=(new Date).toISOString())},postAssessmentSave:function(t,e){var n=e.payload;t.data[f.a]=n,t.data.dirty=!1},clearQuestion:function(t){t.question=null},updateProgress:function(t,e){var n=e.payload;t.question.progress=n}})});e.b=L.reducer;var A=T(T({},L.actions),{},{load:function(t){var e=t.author_id,n=t.collection_id,o=t.assessment_id,i=t.course_url_slug,a=void 0===i?"":i,r=t.page_url_slug,s=void 0===r?"":r,u=t.mode;return function(t){var i=a&&s?"assessment/".concat(a,"/").concat(s):"assessment/".concat(e,"/").concat(n,"/").concat(o),r="view"===u||"compare"===u?i:"author/".concat(e,"/collection/").concat(n,"/assessment/").concat(o);return t(Object(c.a)({},l.a,{types:L.actions,endpoint:r,postProcess:R,getHeaders:!0})).then((function(e){e&&t(A.updateETag(e.xhr.headers.get(f.a)))}))}},save:function(t){var e=t.assessment;return function(t){return Object(O.y)(U(e)).then((function(e){e&&t(A.postAssessmentSave(e.xhr.headers.get(f.a)))}))}},prepareDockerOnSetAssessment:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n,o){var i,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===t||void 0===t?void 0:t.docker)?T(T({},t.docker),{},{envs:null!==(i=t.docker.envs)&&void 0!==i?i:[]}):m.e,e.next=3,Object(j.g)();case 3:c=e.sent,s=T(T({},r),{},{container:T(T({},r.container),{},{liveInstance:c})}),n(S.b.setObject(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},saveQuestion:function(t){var e=t.question;return function(t){return Object(O.B)(q(e)).then((function(e){var n;e&&t(A.updateQuestionETag((n={},Object(c.a)(n,f.a,e.xhr.headers.get(f.a)),Object(c.a)(n,"saved",!0),n)))}))}},loadQuestion:function(t){return function(e){return Object(O.v)(t).then((function(t){if(null===t||void 0===t?void 0:t.data){var n=JSON.parse(t.data);return e(A.setQuestion(Object(c.a)({data:n},f.a,t.xhr.headers.get(f.a)))),n}}))}},loadQuestionSnapshot:function(t,e,n,o){return function(n){return Object(O.w)(t,e,o,v.r.ASSESSMENT_QUESTION).then((function(t){if(null===t||void 0===t?void 0:t.data){var e=JSON.parse(t.data);return n(A.setRestoredQuestion({data:e})),e}}))}}}),D=function t(e,n){return function(e,o){return n&&e(n),e(g.b.show(h.y,{status:"WAIT",text:"Saving Assessment"})),e(A.save({assessment:T(T({},o().assessment.data),{},{docker:JSON.stringify(Object(m.b)(o().dockerDetails))})})).then((function(){e(g.b.show(h.y,{status:"SUCCESS",text:"Assessment saved"}))})).catch((function(o){var i;Object(y.a)(o,e);var a=null===o||void 0===o||null===(i=o.responseJSON)||void 0===i?void 0:i.errorText;o.status===b.c.AlreadyExistsException&&a===b.b.versionOutDatedMessage?e(B((function(){e(A.updateETag(v.I)),e(t(void 0,n))}))):e(g.b.show(h.y,{status:"ERROR",text:"Failed to save assessment"}))}))}},R=function(t){var e=t.data,n=JSON.parse(e),o=n.toc;return Object.keys(o).length||(n=T(T({},n),{},{toc:I,dirty:!1})),n},J=function(t){var e=t.map((function(t){return Object(x.a)((null===t||void 0===t?void 0:t.text)||"","concepts").reduce((function(t,e){var n=e.name;return T(T({},t),{},Object(c.a)({},n,!0))}),{})})).reduce((function(t,e){return T(T({},t),e)}),{});return Object.keys(e)},U=function(t){var e=t.udata_files.map((function(t){return t.file_id}));e=JSON.stringify(e);var n=JSON.stringify(t.toc);return T(T({},t),{},{udata_files:e,toc:n,dirty:!1,concept_list:J([t.summary])})},q=function(t){var e,n,i,a=[];"AssessmentFreeText"===t.question_type?a=J([].concat(Object(o.a)(null===t||void 0===t||null===(e=t.protected_content)||void 0===e?void 0:e.answers),[null===t||void 0===t||null===(n=t.content)||void 0===n?void 0:n.questionStatement])):a=J([null===t||void 0===t||null===(i=t.content)||void 0===i?void 0:i.questionStatement]);return T(T({},t),{},{concept_list:a})},M=function t(e){return function(n,o){return e&&n(e),n(g.b.show(h.y,{status:"WAIT",text:"Saving Question"})),n(A.saveQuestion({question:o().assessment.question})).then((function(){n(g.b.show(h.y,{status:"SUCCESS",text:"Question saved"}))})).catch((function(o){var i,a=null===o||void 0===o||null===(i=o.responseJSON)||void 0===i?void 0:i.errorText;o.status===b.c.AlreadyExistsException&&a===b.b.versionOutDatedMessage?n(B((function(){n(A.updateQuestionETag(Object(c.a)({},f.a,v.I))),n(t(e))}))):n(g.b.show(h.y,{status:"ERROR",text:"Failed to save question"}))}))}},F=function(t,e,n,o){return function(i){var a=o.file.name.split(" ").join("-"),r="/api/author/".concat(t,"/collection/").concat(e,"/containers/").concat(a,"/get_upload_url?assessment_id=").concat(n);return Object(w.a)({url:r,type:"GET"}).then(JSON.parse).then((function(t){var e=t.gcs_object_name,n=t.container_id,r=void 0===n?-1:n,c=t.blob_upload_url,s=t.upload_success_url,l=t.build_status_url,u=t.tarball_download_url,d=t.build_log_url,p=t.rebuild_image_url;return i(S.b.setFile(T(T({},o),{},{id:r,buildStatusUrl:l,tarballDownloadUrl:u,buildLogUrl:d,rebuildImageUrl:p,file:{name:a,size:o.file.size,awaitingUpload:!0}}))),{onUploadSuccess:function(){return Object(w.a)({url:s,type:"POST",data:{gcs_object_name:e}},!0)},upload:function(){return Object(w.a)({url:c,type:"POST",data:o.file,processData:!1,contentType:o.file.type})}}})).catch((function(t){console.log(t)}))}},B=function(t){return function(e){e(g.b.close()),e(g.b.show(h.l,{onConfirm:t,cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))}}},OYQK:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var o={operationNotAllowedException:400,accessDeniedException:403,AlreadyExistsException:409,serverError:500},i={AssetUploadFailedException:"ASSET_UPLOAD_FAILED"},a={versionOutDatedMessage:"Version outdated",shotUrlNotUniqueMessage:"Shot already exists with url",canonicalUrlNotValid:"Invalid Canonical Url.",programmaticallyCancelled:"Operation was programmatically cancelled"}},QJIx:function(t,e,n){"use strict";e.a={version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}}},S2Rg:function(t,e,n){"use strict";e.a={react:{react:"15.6.1","react-dom":"15.6.1"}}},WAQY:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var o=n("o0o1"),i=n.n(o),a=n("HaE+"),r=n("rePB"),c=n("clVV"),s=n("i7Pf");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=Object(s.b)({name:"user/courseCompletion",initialState:{},reducers:{set:function(t,e){var n=e.payload;return u(u({},t),n)},setAll:function(t,e){return e.payload},reset:function(t){}}});e.b=d.reducer;var p=u(u({},d.actions),{},{load:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return function(){var r=Object(a.a)(i.a.mark((function a(r,s){var l,d,v;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:return l=t.filter((function(t){return"collection"===t.doc_type})).map((function(t){return{map_name:"CourseCompletion_".concat(t.author_id,"_").concat(t.id),map_keys:null}})),i.next=5,Object(c.s)(l);case 5:d=i.sent,v=u(u({},n),JSON.parse(d)),"function"===typeof o?o(v):r(p.setAll(v));case 8:case"end":return i.stop()}}),a)})));return function(t,e){return r.apply(this,arguments)}}()}})},WVQk:function(t,e,n){"use strict";n.d(e,"b",(function(){return f}));var o=n("rePB"),i=n("03FM"),a=n("396a"),r=n("i7Pf");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=Object(i.a)(),u=l.initialState,d=l.reducers,p=Object(r.b)({name:"reader/edpresso/featured",initialState:u,reducers:s(s({},d),{},{bookmark:{reducer:function(t,e){var n,o,i,a=e.payload,r=a.isBookmarkedByReader,c=a.shotId,s=null!==(n=null===t||void 0===t||null===(o=t.data)||void 0===o||null===(i=o.edpresso_shots)||void 0===i?void 0:i.findIndex((function(t){return t.id===c})))&&void 0!==n?n:-1;t.loaded&&s>=0&&(t.data.edpresso_shots[s].isBookmarkedByReader=r)},prepare:function(t,e){return{payload:{isBookmarkedByReader:t,shotId:e}}}}})});e.a=p.reducer;var v=function(t){return function(e){var n=JSON.parse(e);return n.edpresso_shots=t.concat(n.edpresso_shots),n}},f=s(s({},p.actions),{},{load:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"published",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return t=c?"reader/shots/".concat(c):r?"edpresso/shots?status=published&cursor=".concat(e):"edpresso/shots?status=".concat(i,"&cursor=").concat(e),Object(o.a)({},a.a,{types:p.actions,endpoint:t,postProcess:v(n)})}})},X9L9:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var o=n("i7Pf"),i=Object(o.b)({name:"notFoundPage",initialState:!1,reducers:{set:function(t,e){return e.payload}}});e.a=i.reducer;var a=i.actions},abDY:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("KQm4"),i=n("rePB"),a=n("03FM"),r=n("396a"),c=n("i7Pf");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u="edpresso/bookmarked-shots",d=Object(a.a)(),p=d.initialState,v=d.reducers,f=Object(c.b)({name:u,initialState:p,reducers:l(l({},v),{},{set:function(t,e){var n,i,a,r=e.payload,c=r.isBookmarkedByReader,s=r.shot,u=null!==(n=null===(i=t.data)||void 0===i||null===(a=i.bookmarked_shots)||void 0===a?void 0:a.findIndex((function(t){return t.id===s.id})))&&void 0!==n?n:-1;if(t.loaded&&u>=0)t.data.bookmarked_shots[u].isBookmarkedByReader=c,c||t.data.bookmarked_shots.splice(u,1);else if(t.loaded){var d=l(l({},s),{},{isBookmarkedByReader:c});t.data.bookmarked_shots=[].concat(Object(o.a)(t.data.bookmarked_shots),[d])}}})});e.b=f.reducer;var g=l(l({},f.actions),{},{load:function(){return Object(i.a)({},r.a,{types:f.actions,endpoint:u,postProcess:JSON.parse})}})},cNmg:function(t,e,n){"use strict";var o=n("jxKE");e.a=function(t,e){var n,i;if(e===o.L.LESSON)return o.j.COLLECTION;var a=t||(null===(n=window)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.pathname);return(null===a||void 0===a?void 0:a.startsWith("/path"))?o.j.PATH:(null===a||void 0===a?void 0:a.startsWith("/module"))?o.j.MODULE:o.j.COLLECTION}},clVV:function(t,e,n){"use strict";n.d(e,"D",(function(){return N})),n.d(e,"g",(function(){return L})),n.d(e,"p",(function(){return A})),n.d(e,"o",(function(){return D})),n.d(e,"s",(function(){return J})),n.d(e,"H",(function(){return F})),n.d(e,"n",(function(){return B})),n.d(e,"F",(function(){return H})),n.d(e,"i",(function(){return V})),n.d(e,"j",(function(){return Y})),n.d(e,"x",(function(){return W})),n.d(e,"G",(function(){return K})),n.d(e,"N",(function(){return z})),n.d(e,"q",(function(){return X})),n.d(e,"m",(function(){return Z})),n.d(e,"M",(function(){return $})),n.d(e,"r",(function(){return tt})),n.d(e,"d",(function(){return nt})),n.d(e,"b",(function(){return ot})),n.d(e,"k",(function(){return it})),n.d(e,"C",(function(){return at})),n.d(e,"a",(function(){return ct})),n.d(e,"c",(function(){return st})),n.d(e,"e",(function(){return lt})),n.d(e,"f",(function(){return ut})),n.d(e,"E",(function(){return dt})),n.d(e,"K",(function(){return pt})),n.d(e,"I",(function(){return vt})),n.d(e,"J",(function(){return ft})),n.d(e,"v",(function(){return gt})),n.d(e,"u",(function(){return ht})),n.d(e,"w",(function(){return yt})),n.d(e,"B",(function(){return Ot})),n.d(e,"z",(function(){return _t})),n.d(e,"l",(function(){return mt})),n.d(e,"t",(function(){return jt})),n.d(e,"y",(function(){return St})),n.d(e,"A",(function(){return wt})),n.d(e,"h",(function(){return xt})),n.d(e,"L",(function(){return Et}));var o=n("Ff2n"),i=n("rePB"),a=n("o0o1"),r=n.n(a),c=n("HaE+"),s=n("rfrl"),l=n("fNkK"),u=n("5R4e"),d=n("OpYl"),p=n("+Zpp"),v=n("9wcz"),f=n.n(v),g=n("VMC0"),h=n("AkIC"),y=n("XZhq"),b=n("OYQK"),O=n("Vgjn"),_=n("Evd+"),m=n("G384"),j=n("9dyO"),S=n("OR4b"),w=n("jxKE"),x=n("pLgj"),E=n("NHG4"),T=n("t4OO"),I=n("cNmg"),k=n("9jYD");function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(){return function(t){t(j.a.reset()),t(h.b.set({isLoading:!1,isLoaded:!1}))}},L=function(t){var e=t.isMini,n=void 0!==e&&e,o=t.work_type,i=void 0===o?"":o,a=t.pathId,r=void 0===a?"":a;return Object(l.a)({url:"/api/author/collection".concat(i?"?work_type=".concat(i):""),type:"POST",data:{is_mini:n,path_id:r}})},A=function(t,e,n,o){var i="/api/author/".concat(t,"/collection/").concat(e,"/deleted-pages");return n&&(i+="?cursor=".concat(n)),o&&(i+="?pageSize=".concat(o)),Object(l.a)({url:i,type:"GET"})},D=function(t){var e,n=t.author_id,o=t.collection_id,i=t.course_url_slug,a=t.work_type;return e=i?"collection/".concat(i,"/certificate-status?work_type=").concat(a):"collection/".concat(n,"/").concat(o,"/certificate-status?work_type=").concat(a),Object(l.a)({url:"/api/".concat(e),type:"GET"})},R=function(t){var e,n=t.author_id,o=t.collection_id,i=t.course_url_slug,a=t.is_draft_page,r=t.work_type;return e=i?"collection/".concat(i,"?work_type=").concat(r):a?"author/".concat(n,"/collection/").concat(o,"?work_type=").concat(r):"collection/".concat(n,"/").concat(o,"?work_type=").concat(r),Object(l.a)({url:"/api/".concat(e,"&version=1"),type:"GET"},!0)},J=function(t){return Object(l.a)({url:"/api/userdata/maps/get_values",type:"POST",data:{maps_keys_json:JSON.stringify({maps:t})}})},U=Object(s.a)((function(t,e){var n,o,i,a=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.docker;a?(Object(m.b)(a),a.envs=null!==(i=a.envs)&&void 0!==i?i:[],a.container.liveInstance=e):t.instance.details.docker=_.e})),q=Object(s.a)((function(t,e){var n,o=null===t||void 0===t?void 0:t.docker;o?(Object(m.b)(o),o.envs=null!==(n=o.envs)&&void 0!==n?n:[],o.container.liveInstance=e):t.docker=_.e})),M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var o=Object(c.a)(r.a.mark((function o(i,a){var c,s,l,u,p,v,f,g;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!!(null===(c=a())||void 0===c||null===(s=c.user)||void 0===s||null===(l=s.info)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.user_id)||(null===t||void 0===t?void 0:t.is_user_loggedin)||e)&&!t.instance.details.allow_logged_out_executions){o.next=7;break}return o.next=4,Object(d.g)(t.collectionId,t.authorId);case 4:o.t0=o.sent,o.next=8;break;case 7:o.t0={};case 8:if(f=o.t0,g=U(t,f),!!((null===(p=a())||void 0===p||null===(v=p.loader)||void 0===v?void 0:v.isLoading)||n)){o.next=13;break}throw Error(b.b.programmaticallyCancelled);case 13:return o.next=15,i(j.a.set(g));case 15:return o.abrupt("return",i(x.b.setObject(g.instance.details.docker)));case 16:case"end":return o.stop()}}),o)})));return function(t,e){return o.apply(this,arguments)}}()},F=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n,o){var i,a,c,s,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!!!(null===(i=o())||void 0===i||null===(a=i.user)||void 0===a||null===(c=a.info)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.user_id)){e.next=7;break}return e.next=4,Object(d.g)();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:return l=e.t0,u=q(t,l),e.next=12,n(j.a.updateDockerForExternalLesson(u));case 12:return e.abrupt("return",n(x.b.setObject(u.docker)));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){o(h.b.set({isLoading:!0,isLoaded:!1}));var i=Object(I.a)(null===e||void 0===e?void 0:e.asPath);t.work_type||(t=C(C({},t),{},{work_type:i}));var a=/(collection|path|module)editor\/([0-9]{5,16})\/([0-9]{5,16})$/;return R(t).then(function(){var s=Object(c.a)(r.a.mark((function c(s){var l,u,d,v,g,h,y,b,O;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=s.data,d=JSON.parse(u),v=d.instance.details.work_type,g=d.instance.details.author_id,h=d.instance.details.collection_id,i===v){r.next=13;break}if(t.is_draft_page){r.next=12;break}if(!t.page_id){r.next=9;break}return r.abrupt("return",e.replace("/".concat(v,"/page/").concat(g,"/").concat(h,"/").concat(t.page_id)));case 9:return r.abrupt("return",e.replace("/".concat(v,"/").concat(g,"/").concat(h)));case 10:r.next=13;break;case 12:a.test(null===e||void 0===e?void 0:e.asPath)&&e.replace("/".concat(v,"editor/").concat(g,"/").concat(h));case 13:if(d=C(C({},d),{},{collectionId:h,authorId:g}),!t.author_id||t.is_draft_page||!d.instance.details.url_slug){r.next=23;break}return Object(p.c)(p.b.REDIRECTION,p.a.FRIENDLY_URL_REDIRECTION),y=Object(k.a)(d.instance.details.work_type,!!t.page_id),b="/".concat(y,"/").concat(d.instance.details.url_slug),t.page_id&&(O=new f.a,b+="/".concat(O.encode(parseInt(t.page_id,10)))),e.asPath.split("#")[0].endsWith("/assessment")&&(b+="/assessment"),e.asPath.split("#")[0].endsWith("/certificate")&&(b+="/certificate"),e.asPath.split("#")[1]&&(b+="#".concat(e.asPath.split("#")[1])),r.abrupt("return",e.replace(b));case 23:return r.next=25,o(M(d,null===(l=t)||void 0===l?void 0:l.is_draft_page,n));case 25:return r.abrupt("return",d);case 26:case"end":return r.stop()}}),c)})));return function(t){return s.apply(this,arguments)}}()).then((function(){o(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(t){t.message!==b.b.programmaticallyCancelled&&Object(u.a)(t,o),401!==t.status&&o(h.b.set({isLoaded:!1,isLoading:!1}))}))}},H=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e),type:"PUT",data:n,headers:Object(i.a)({},O.a,o)},!0)},Q=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.j.COLLECTION;return function(i){return i(h.b.set({isLoading:!0})),i(g.b.show(y.y,{status:"WAIT",text:"Saving ".concat(Object(w.Y)(o))})),H(e.author_id,e.collection_id,e.payload,e.payload.eTag).then((function(t){var a=t.xhr,r=e.payload;i(j.a.updateETAG(a.headers.get(O.a))),i(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(o)," saved successfully")})),i(j.a.updateDetails(r)),"function"===typeof n&&n(),i(h.b.set({isLoaded:!0,isLoading:!1})),i(j.a.setDirty(!1))})).catch((function(n){Object(u.a)(n,i),n.status===b.c.AlreadyExistsException?(i(g.b.close()),e.payload.eTag=w.I,i(g.b.show(y.l,{onConfirm:function(){return i(t(e,void 0,o))},cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))):i(g.b.update({status:"ERROR",text:"Unable to Save Changes"})),i(h.b.set({isLoading:!1}))}))}},G=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"collection",o=arguments.length>3?arguments[3]:void 0;return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/publish?work_type=").concat(n),type:"POST",data:{path_id:o}})},V=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e),type:"DELETE"})},Y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.j.COLLECTION;return function(i,a){return i(g.b.show(y.y,{status:"WAIT",text:"Deleting ".concat(Object(w.Y)(o))})),V(t,e).then(JSON.parse).then((function(t){t.is_submitted?i(g.b.update({status:"ERROR",text:"".concat(Object(w.Y)(o)," already submitted for deletion")})):t.is_approved&&!t.is_submitted?(i(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(o)," submitted for deletion")})),n&&i(S.a.load())):(i(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(o)," deleted")})),i(S.a.delete(e)))})).catch((function(t){console.log(t),Object(u.a)(t,i),i(g.b.update({status:"ERROR",text:"Unable to Delete ".concat(Object(w.Y)(o))}))}))}},W=function(t,e,n,o,i,a){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return function(c){return c(h.b.set({isLoading:!0})),c(g.b.update({status:"WAIT",text:o})),G(t,e,n,r).then((function(){c(j.a.publish()),c(g.b.update({status:"SUCCESS",text:i})),"function"===typeof a&&a(),c(h.b.set({isLoading:!1}))})).catch((function(t){var e,n,i=null;Object(u.a)(t,c),i=400===t.status&&(null===t||void 0===t||null===(e=t.responseJSON)||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.categories)?t.responseJSON.errors.categories:"".concat(o," failed"),c(g.b.showOrUpdate(y.y,{status:"ERROR",text:i})),c(h.b.set({isLoading:!1}))}))}},K=function(t,e,n){return function(o){var i=n.file.name.split(" ").join("-"),a="/api/author/".concat(t,"/collection/").concat(e,"/containers/").concat(i,"/get_upload_url");return o(h.b.set({isLoaded:!1,isLoading:!0})),Object(l.a)({url:a,type:"GET"}).then(JSON.parse).then((function(t){var e=t.gcs_object_name,a=t.container_id,r=void 0===a?-1:a,c=t.blob_upload_url,s=t.upload_success_url,u=t.build_status_url,d=t.tarball_download_url,p=t.build_log_url,v=t.rebuild_image_url;return o(x.b.setFile(C(C({},n),{},{id:r,buildStatusUrl:u,tarballDownloadUrl:d,buildLogUrl:p,rebuildImageUrl:v,file:{name:i,size:n.file.size,awaitingUpload:!0}}))),o(h.b.set({isLoaded:!0,isLoading:!1})),{onUploadSuccess:function(){return Object(l.a)({url:s,type:"POST",data:{gcs_object_name:e}},!0)},upload:function(){return Object(l.a)({url:c,type:"POST",data:n.file,processData:!1,contentType:n.file.type})}}})).catch((function(t){console.log(t),o(h.b.set({isLoaded:!1,isLoading:!1}))}))}},z=function(t){var e=t.authorId,n=t.collectionId,o=t.upload,i=t.onUploadSuccess,a=t.collectionType;return function(t){return t(x.b.updateBuildStatus("UPLOADING")),o().then((function(){return console.log("file uploaded successfully"),i()})).then((function(t){return JSON.parse(t.data)})).then((function(o){var i=o.image_name,r=void 0===i?"default_name":i;t(dt({author_id:e,collection_id:n},x.b.afterFileUpload(r),!1,a)),t(g.b.show(y.y,{status:"SUCCESS",text:"Docker Image build has been queued!!"}))})).catch((function(e){console.log("error while uploading docker file",e),t(x.b.updateBuildStatus("FAILURE")),t(g.b.show(y.y,{status:"ERROR",text:"Uploading Docker File failed"}))}))}},X=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/image/upload/url"),type:"GET"})},Z=function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/cerf/").concat(n,"/upload/url"),type:"GET"})},$=function(){var t=Object(c.a)(r.a.mark((function t(e,n,o){var i,a,c,s,u,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.upload_url,a=n.upload_success_url,c=n.gcs_object_name,s=function(){return Object(l.a)({url:i,type:"POST",data:o,processData:!1,contentType:o.type})},u=function(){return Object(l.a)({url:a,type:"POST",data:{gcs_object_name:c,file_size:o.size}})},e(g.b.show(y.y,{status:"WAIT",text:"Uploading code resource file"})),d=n,t.next=7,s();case 7:return console.log("code execution resource file uploaded successfully"),t.next=10,u();case 10:console.log("upload confirmed"),d.file=null,d.upload_url=null,d.upload_success_url=null,d.updated=!1,d.uploadStatus=w.V.UPLOAD_SUCCESSFUL,e(j.a.updateCodeExecResourceFile(d));case 17:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}(),tt=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/udata/upload/url"),type:"GET"})},et=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/page?work_type=").concat(Object(I.a)()),type:"POST"})},nt=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/project"),type:"POST"})},ot=function(t,e){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment"),type:"POST"})},it=function(t,e,n,o){return Object(l.a)({url:"/api/reader/external-offer",type:"POST",data:{author_id:t,collection_id:e,page_id:n,course_completion_percentage:o}})},at=function(t,e,n,o,i){return Object(l.a)({url:"/api/reader/external-offer/interaction/".concat(t),type:"POST",data:{author_id:n,collection_id:o,interaction:e,course_completion_percentage:i}})};function rt(t,e){var n,o,i=JSON.stringify(t.instance.details.toc),a=C({},t.instance.details),r=null!==(n=null===(o=a.code_exec_resource_metadata)||void 0===o?void 0:o.file_id)&&void 0!==n?n:null,c=JSON.stringify(a.udata_files.map((function(t){return t.file_id}))),s=JSON.stringify({code_themes:a.CodeThemes}),l=JSON.stringify(a.testimonials),u=JSON.stringify(Object(_.b)(e)),d=t[O.a],p=JSON.stringify({licensing:a.licensing}),v=a.tags.toString(),f=JSON.stringify({api_keys:a.api_keys});return delete a.api_keys,delete a.toc,delete a.udata_files,delete a.CodeThemes,delete a.testimonials,delete a.licensing,C(C({},a),{},{categories_json_string:i,testimonials_string:l,docker:u,user_data_file_ids_string:c,code_exec_resource_file_id:r,default_themes_json_string:s,api_keys_json_string:f,tags:v,eTag:d,licensing_json_string:p})}var ct=function(t){var e=t.author_id,n=t.collection_id,o=t.category_id,i=t.index,a=t.createNewArticle,s=void 0===a||a,l=t.data,d=void 0===l?{}:l;return function(){var t=Object(c.a)(r.a.mark((function t(a,c){var l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return a(j.a.addArticle({category_id:o,article:t,index:i,data:d}))},s){t.next=5;break}l(),t.next=7;break;case 5:return a(h.b.set({isLoaded:!1,isLoading:!0})),t.abrupt("return",et(e,n).then((function(t){var n=JSON.parse(t);n.author_id=e,l(n),a(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(t){Object(u.a)(t,a),a(h.b.set({isLoaded:!1,isLoading:!1}))})));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},st=function(t){var e=t.author_id,n=t.collection_id,o=t.project_id,i=t.category_id,a=t.index;return function(t,r){t(h.b.set({isLoaded:!1,isLoading:!0})),function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/project/").concat(n,"/project_component"),type:"POST"})}(e,n,o).then((function(e){var n=JSON.parse(e);t(T.b.addComponent({category_id:i,component:n,index:a})),t(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(e){Object(u.a)(e,t),t(h.b.set({isLoaded:!1,isLoading:!1}))}))}},lt=function(t){var e=t.author_id,n=t.collection_id,o=t.assessment_id,i=t.category_id,a=t.index;return function(t,r){t(h.b.set({isLoaded:!1,isLoading:!0})),function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment/").concat(n,"/question"),type:"POST"})}(e,n,o).then((function(e){var n=JSON.parse(e);t(E.a.addQuestion({category_id:i,question:n,index:a})),t(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(e){Object(u.a)(e,t),t(h.b.set({isLoaded:!1,isLoading:!1}))}))}},ut=function(t){var e=t.author_id,n=t.collection_id,o=t.category_id,i=t.src_article_id,a=t.src_article_title,r=t.collectionType;return function(t,c){return t(h.b.set({isLoaded:!1,isLoading:!0})),function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/page"),type:"POST",data:{collection_id:e,page_id:n,instance_type:"latest"}})}(e,n,i).then((function(i){var s=JSON.parse(i);s.title=a,t(j.a.cloneArticle({category_id:o,article:s}));var l=rt(c().author.collection,c().dockerDetails);t(Q({author_id:e,collection_id:n,payload:l},void 0,r)),t(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(e){Object(u.a)(e,t),t(h.b.set({isLoaded:!1,isLoading:!1}))}))}},dt=function(t,e){var n=t.author_id,o=t.collection_id,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.j.COLLECTION;return function(){var t=Object(c.a)(r.a.mark((function t(c,s){var l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:if(!i){t.next=4;break}return t.abrupt("return");case 4:return l=rt(s().author.collection,s().dockerDetails),t.abrupt("return",c(Q({author_id:n,collection_id:o,payload:l},void 0,a)));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},pt=function(t,e){return Object(l.a)({url:"/api/notifications/".concat(t,"/").concat(e),type:"POST"})},vt=function(t){var e=t.author_id,n=t.collection_id,o=t.assessment_id,i=t.question_id,a=t.protectedContent;return Object(l.a)({url:"/api/assessment/".concat(e,"/").concat(n,"/").concat(o,"/").concat(i),type:"POST",data:{answer:JSON.stringify(a),timestamp:(new Date).toISOString()}},!0)},ft=function(t){var e=t.author_id,n=t.collection_id,o=t.assessment_id;return Object(l.a)({url:"/api/assessment/".concat(e,"/").concat(n,"/").concat(o),type:"POST",data:{timestamp:(new Date).toISOString()}},!0)},gt=function(t){var e=t.authorId,n=t.collectionId,o=t.assessmentId,i=t.questionId,a="view"===t.mode?"/api/assessment/".concat(e,"/").concat(n,"/").concat(o,"/").concat(i):"/api/author/".concat(e,"/collection/").concat(n,"/assessment/").concat(o,"/question/").concat(i);return Object(l.a)({url:a,type:"GET"},!0)},ht=function(t){var e=t.authorId,n=t.collectionId,o=t.projectId,i=t.componentId,a="view"===t.mode?"/api/project/".concat(e,"/").concat(n,"/").concat(o,"/").concat(i):"/api/author/".concat(e,"/collection/").concat(n,"/project/").concat(o,"/project_component/").concat(i);return Object(l.a)({url:a,type:"GET"},!0)},yt=function(t,e,n,o){var i="/api/author/".concat(t,"/collection/").concat(e,"/page/snapshot?key=").concat(n,"&document_type=").concat(o);return Object(l.a)({url:i,type:"GET"},!0)},bt=function(t){return C(C({},((e=t).all_lessons,Object(o.a)(e,["all_lessons"]))),{},{content:{content:t.content,protected_content:t.protected_content},protected_content:void 0});var e},Ot=function(t){return Object(l.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/assessment/").concat(t.assessment_id,"/question/").concat(t.question_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(bt(t)),headers:Object(i.a)({},O.a,t[O.a])},!0)},_t=function(t){return Object(l.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/project/").concat(t.project_id,"/project_component/").concat(t.project_component_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(t),headers:Object(i.a)({},O.a,t[O.a])},!0)},mt=function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment/").concat(n,"/udata/upload/url"),type:"GET"})},jt=function(t,e,n){return Object(l.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/project/").concat(n,"/udata/upload/url"),type:"GET"})},St=function(t){return Object(l.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/assessment/").concat(t.assessment_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(t),headers:Object(i.a)({},O.a,t[O.a])},!0)},wt=function(t){return Object(l.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/project/").concat(t.project_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(t),headers:Object(i.a)({},O.a,t[O.a])},!0)},xt=function(t,e,n,o){var i="/api/assessment/begin/".concat(t,"/").concat(e,"/").concat(n);return o&&(i+="?continue=".concat(o)),Object(l.a)({url:i,type:"POST"})},Et=function(t){var e=t.upload,n=t.onUploadSuccess;return function(t){return t(x.b.updateBuildStatus("UPLOADING")),e().then((function(){return console.log("file uploaded successfully"),n()})).then((function(t){return JSON.parse(t.data)})).then(function(){var e=Object(c.a)(r.a.mark((function e(n){var o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.image_name,i=void 0===o?"default_name":o,t(x.b.afterFileUpload(i)),t(g.b.show(y.y,{status:"SUCCESS",text:"Docker Image build has been queued!!"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error while uploading docker file",e),t(x.b.updateBuildStatus("FAILURE")),t(g.b.show(y.y,{status:"ERROR",text:"Uploading Docker File failed"}))}))}}},fh7V:function(t,e,n){"use strict";e.a={Code:!1,Markdown:!1,RunJS:!1,SPA:!1}},mA5Z:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("JyDq"),i=n("DOFM"),a=n("S2Rg"),r=4;e.b={version:r,theme:"default",showLineNumbers:!0,showConsole:!1,hideResultOutput:!1,hideOutputUrl:!1,hideCodeView:!1,loaders:(new o.a).loaders,npmPackages:a.a.react,outputHeight:300,selectedApiKeys:{},selectedEnvVars:{},outputLayout:"desktop",codeContents:{canAddNpmPackages:!0,judge:{judgeDisabled:!1,judgeActive:!1,evaluationContent:i.a.authorCode,hintsContent:[],solutionContent:"",showSolution:!1,exerciseTabsVisible:!1,version:i.a.version},module:"/",id:0,maxId:3,selectedId:2,children:[{id:1,module:"index.js",leaf:!0,data:{content:"import React from 'react';\r\nrequire('./style.css');\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app.js';\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n);\r\n",language:"jsx",staticFile:!0,hidden:!1,highlightedLines:null}},{id:2,module:"app.js",leaf:!0,data:{content:"import React from 'react';\r\n\r\nexport default class App extends React.Component {\r\n  render() {\r\n    return (\r\n      <span>Hello World</span>\r\n    );\r\n  }\r\n}\r\n",language:"jsx",staticFile:!1,hidden:!1,highlightedLines:null}},{module:"style.css",id:3,leaf:!0,data:{content:"p {\r\n  color: blue;\r\n}",language:"css",staticFile:!1,hidden:!1,highlightedLines:null}}]}}},t4OO:function(t,e,n){"use strict";n.d(e,"b",(function(){return L})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return J})),n.d(e,"e",(function(){return U}));var o=n("o0o1"),i=n.n(o),a=n("HaE+"),r=n("rePB"),c=n("03FM"),s=n("396a"),l=n("i7Pf"),u=n("uNJL"),d=n("Cjvp"),p=n("jxKE"),v=n("Vgjn"),f=n("VMC0"),g=n("XZhq"),h=n("5R4e"),y=n("OYQK"),b=n("clVV"),O=n("Evd+"),_=n("OpYl"),m=n("pLgj"),j=n("fNkK"),S=n("QJIx"),w=n("mA5Z");function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={categories:[JSON.parse(JSON.stringify(new u.a(!0,!1,!1,p.d.PROJECT_CATEGORY)))]},I=function(t,e){return t.findIndex((function(t){return t.id===e}))},k=Object(c.a)(),P=k.initialState,C=k.reducers,N=Object(l.b)({name:"project",initialState:E(E({},P),{},{component:null}),reducers:E(E({},C),{},{updateProjectTitle:function(t,e){var n=e.payload;t.data.title=n,t.data.dirty=!0},updateProjectSummary:function(t,e){var n=e.payload;t.data.summary=n,t.data.dirty=!0},addUserDataResourceFile:function(t,e){var n=e.payload;t.data.udata_files.push(n),t.data.dirty=!0},updateUserDataResourceFile:function(t,e){var n=e.payload,o=n.payload,i=n.index;t.data.udata_files[i]=E(E({},t.data.udata_files[i]),o),t.data.dirty=!0},removeUserDataResourceFile:function(t,e){var n=e.payload.index;t.data.udata_files.splice(n,1),t.data.dirty=!0},addComponent:function(t,e){var n,o,i=e.payload,a=i.category_id,r=i.component,c=i.index;!function(t,e,n,o){var i,a,r,c,s=e.project_component_id;if(null==o){var l,u,v,f,g=new d.a(parseInt(s),p.r.PROJECT_COMPONENT);null===t||void 0===t||null===(l=t.data)||void 0===l||null===(u=l.toc)||void 0===u||null===(v=u.categories)||void 0===v||null===(f=v[n])||void 0===f||f.pages.push(JSON.parse(JSON.stringify(g)))}else null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[n])||void 0===c||c.pages.splice(o+1,0,JSON.parse(JSON.stringify(new d.a(parseInt(s),p.r.PROJECT_COMPONENT))))}(t,r,I(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,a),c),t.data.dirty=!0},updateComponentTitle:function(t,e){var n=e.payload,o=n.categoryId,i=n.componentId,a=n.title;if(t.data){if(o){var r=I(t.data.toc.categories,o),c=I(t.data.toc.categories[r].pages,i);t.data.toc.categories[r].pages[c].title=a,t.data.toc.categories[r].pages[c].editMode=!1}t.data.dirty=!0}},moveComponentWithinOrigin:function(t,e){var n,o,i,a,r=e.payload,c=r.from,s=r.to,l=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o||null===(i=o.categories)||void 0===i||null===(a=i[c.parentIndex])||void 0===a?void 0:a.pages;l.splice(s.itemIndex,0,l.splice(c.itemIndex,1)[0]),t.data.dirty=!0},removeComponent:function(t,e){var n,o,i,a,r,c,s=e.payload,l=s.category_id,u=s.article_id,d=I(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(o=n.toc)||void 0===o?void 0:o.categories,l),p=I(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[d])||void 0===c?void 0:c.pages,u);t.data.toc.categories[d].pages.splice(p,1),t.data.dirty=!0},updateComponentDetails:function(t,e){var n=e.payload;t.component.content.descriptionWidgets=n.content.descriptionWidgets,t.component.dirty=!0},updateComponentCode:function(t,e){var n=e.payload;t.component.content.codeContent=n.codeContent,t.component.dirty=!0},updateComponentETag:function(t,e){var n,o=e.payload;t.component=null!==(n=t.component)&&void 0!==n?n:null,t.component[v.a]=o[v.a],o.saved&&(t.component.dirty=!1)},setComponent:function(t,e){var n=e.payload;t.component=function(t){var e,n;return E(E({},t),{},{content:{descriptionWidgets:(null===(e=t.content)||void 0===e?void 0:e.descriptionWidgets)||[S.a],codeContent:(null===(n=t.content)||void 0===n?void 0:n.codeContent)||w.b}})}(n.data),t.component[v.a]=n[v.a]},postProjectSave:function(t,e){var n=e.payload;t.data[v.a]=n,t.data.dirty=!1},clearComponent:function(t){t.component=null},updateCodeContent:function(t,e){var n=e.payload;"function"!==typeof n?t.component&&(t.component.content.codeContent=E(E({},t.component.content.codeContent),n)):n(t.component.content.codeContent)}})});e.a=N.reducer;var L=E(E({},N.actions),{},{load:function(t){var e=t.author_id,n=t.collection_id,o=t.project_id,i=t.course_url_slug,a=void 0===i?"":i,c=t.page_url_slug,l=void 0===c?"":c,u=t.mode;return function(t){var i=a&&l?"project/".concat(a,"/").concat(l):"project/".concat(e,"/").concat(n,"/").concat(o),c="view"===u?i:"author/".concat(e,"/collection/").concat(n,"/project/").concat(o);return t(Object(r.a)({},s.a,{types:N.actions,endpoint:c,postProcess:D,getHeaders:!0})).then((function(e){e&&t(L.updateETag(e.xhr.headers.get(v.a)))}))}},save:function(t){var e=t.project;return function(t){return Object(b.A)(R(e)).then((function(e){e&&t(L.postProjectSave(e.xhr.headers.get(v.a)))}))}},prepareDockerOnSetProject:function(t){return function(){var e=Object(a.a)(i.a.mark((function e(n,o){var a,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===t||void 0===t?void 0:t.docker)?E(E({},t.docker),{},{envs:null!==(a=t.docker.envs)&&void 0!==a?a:[]}):O.e,e.next=3,Object(_.g)();case 3:c=e.sent,s=E(E({},r),{},{container:E(E({},r.container),{},{liveInstance:c})}),n(m.b.setObject(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},saveComponent:function(t){var e=t.component;return function(t){return Object(b.z)(e).then((function(e){var n;e&&t(L.updateComponentETag((n={},Object(r.a)(n,v.a,e.xhr.headers.get(v.a)),Object(r.a)(n,"saved",!0),n)))}))}},loadComponent:function(t){return function(e){return Object(b.u)(t).then((function(t){if(null===t||void 0===t?void 0:t.data){var n=JSON.parse(t.data);return e(L.setComponent(Object(r.a)({data:n},v.a,t.xhr.headers.get(v.a)))),n}}))}}}),A=function t(e,n){return function(e,o){return n&&e(n),e(f.b.show(g.y,{status:"WAIT",text:"Saving Project"})),e(L.save({project:E(E({},o().project.data),{},{docker:JSON.stringify(Object(O.b)(o().dockerDetails))})})).then((function(){e(f.b.show(g.y,{status:"SUCCESS",text:"Project saved"}))})).catch((function(o){var i;Object(h.a)(o,e);var a=null===o||void 0===o||null===(i=o.responseJSON)||void 0===i?void 0:i.errorText;o.status===y.c.AlreadyExistsException&&a===y.b.versionOutDatedMessage?e(q((function(){e(L.updateETag(p.I)),e(t(void 0,n))}))):e(f.b.show(g.y,{status:"ERROR",text:"Failed to save project"}))}))}},D=function(t){var e=t.data,n=JSON.parse(e),o=n.toc;return Object.keys(o).length||(n=E(E({},n),{},{toc:T,dirty:!1})),n},R=function(t){var e=t.udata_files.map((function(t){return t.file_id}));e=JSON.stringify(e);var n=JSON.stringify(t.toc);return E(E({},t),{},{udata_files:e,toc:n,dirty:!1})},J=function t(e){return function(n,o){return e&&n(e),n(f.b.show(g.y,{status:"WAIT",text:"Saving Component"})),n(L.saveComponent({component:o().project.component})).then((function(){n(f.b.show(g.y,{status:"SUCCESS",text:"Component saved"}))})).catch((function(o){var i,a=null===o||void 0===o||null===(i=o.responseJSON)||void 0===i?void 0:i.errorText;o.status===y.c.AlreadyExistsException&&a===y.b.versionOutDatedMessage?n(q((function(){n(L.updateComponentETag(Object(r.a)({},v.a,p.I))),n(t(e))}))):n(f.b.show(g.y,{status:"ERROR",text:"Failed to save component"}))}))}},U=function(t,e,n,o){return function(i){var a=o.file.name.split(" ").join("-"),r="/api/author/".concat(t,"/collection/").concat(e,"/containers/").concat(a,"/get_upload_url?project_id=").concat(n);return Object(j.a)({url:r,type:"GET"}).then(JSON.parse).then((function(t){var e=t.gcs_object_name,n=t.container_id,r=void 0===n?-1:n,c=t.blob_upload_url,s=t.upload_success_url,l=t.build_status_url,u=t.tarball_download_url,d=t.build_log_url,p=t.rebuild_image_url;return i(m.b.setFile(E(E({},o),{},{id:r,buildStatusUrl:l,tarballDownloadUrl:u,buildLogUrl:d,rebuildImageUrl:p,file:{name:a,size:o.file.size,awaitingUpload:!0}}))),{onUploadSuccess:function(){return Object(j.a)({url:s,type:"POST",data:{gcs_object_name:e}},!0)},upload:function(){return Object(j.a)({url:c,type:"POST",data:o.file,processData:!1,contentType:o.file.type})}}})).catch((function(t){console.log(t)}))}},q=function(t){return function(e){e(f.b.close()),e(f.b.show(g.l,{onConfirm:t,cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))}}},uNJL:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("1OyB"),i=n("rePB"),a=n("4mnY"),r=n("I1F8"),c=n("jxKE"),s=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.d.COLLECTION_CATEGORY,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(a.a)(),d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,v=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";Object(o.a)(this,t),Object(i.a)(this,"id",void 0),Object(i.a)(this,"title",void 0),Object(i.a)(this,"pages",void 0),Object(i.a)(this,"editMode",void 0),Object(i.a)(this,"type",void 0),Object(i.a)(this,"author_id",void 0),Object(i.a)(this,"collection_id",void 0),this.id=s?r.a:u,this.title=v||(e?"__default":s?"Recovered Lessons":l===c.d.ASSESSMENT?"Untitled Assessment":l===c.d.PROJECT?"Untitled Project":""),this.pages=[],this.editMode=n,this.type=l,this.author_id=d,this.collection_id=p}}}]);
//# sourceMappingURL=79693d57f948fc18b35db33f1ba26d2e1b3b26ae.faaf639c5028623517fc.js.map